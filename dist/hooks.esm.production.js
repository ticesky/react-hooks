import r from"@babel/runtime/helpers/esm/toConsumableArray";import e from"@babel/runtime/helpers/esm/regeneratorRuntime";import n from"@babel/runtime/helpers/esm/objectSpread2";import t from"@babel/runtime/helpers/esm/asyncToGenerator";import a from"@babel/runtime/helpers/esm/slicedToArray";import{useState as o,useRef as u,useCallback as l,useEffect as i}from"react";function c(c,f){var m=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=o({loading:m,error:null,data:null}),p=a(s,2),d=p[0],b=p[1];var v=u(false);var h=u([]);var g=l(t(e().mark((function r(){var t,a,o,u,l=arguments;return e().wrap((function r(e){while(1)switch(e.prev=e.next){case 0:b((function(r){return n(n({},r),{},{loading:true,error:null})}));for(t=l.length,a=new Array(t),o=0;o<t;o++){a[o]=l[o]}h.current=a;e.prev=3;e.next=6;return c.apply(void 0,a);case 6:u=e.sent;b({loading:false,error:null,data:u});e.next=13;break;case 10:e.prev=10;e.t0=e["catch"](3);b({loading:false,error:e.t0,data:null});case 13:case"end":return e.stop()}}),r,null,[[3,10]])}))),[c]);i((function(){if(v.current||m){if(typeof f==="function"){f.apply(void 0,[d].concat(r(h.current)))}}}),[d]);i((function(){v.current=true}),[]);return[d,g]}function f(){var r=o(0),e=a(r,2),n=e[1];return l((function(){return n((function(r){return r+1}))}),[])}export{c as useAsyncBase,f as useForceUpdate};
