import r from"@babel/runtime/helpers/esm/toConsumableArray";import e from"@babel/runtime/helpers/esm/regeneratorRuntime";import n from"@babel/runtime/helpers/esm/objectSpread2";import t from"@babel/runtime/helpers/esm/asyncToGenerator";import u from"@babel/runtime/helpers/esm/slicedToArray";import{useState as a,useRef as o,useCallback as c,useEffect as i,useMemo as l}from"react";function f(l,f){var m=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=a({loading:m,error:null,data:null}),p=u(s,2),v=p[0],d=p[1];var b=o(false);var h=o([]);var y=c(t(e().mark((function r(){var t,u,a,o,c=arguments;return e().wrap((function r(e){while(1)switch(e.prev=e.next){case 0:d((function(r){return n(n({},r),{},{loading:true,error:null})}));for(t=c.length,u=new Array(t),a=0;a<t;a++){u[a]=c[a]}h.current=u;e.prev=3;e.next=6;return l.apply(void 0,u);case 6:o=e.sent;d({loading:false,error:null,data:o});e.next=13;break;case 10:e.prev=10;e.t0=e["catch"](3);d({loading:false,error:e.t0,data:null});case 13:case"end":return e.stop()}}),r,null,[[3,10]])}))),[l]);i((function(){if(b.current||m){if(typeof f==="function"){f.apply(void 0,[v].concat(r(h.current)))}}}),[v]);i((function(){b.current=true}),[]);return[v,y]}function m(){var r=a(0),e=u(r,2),n=e[1];return c((function(){return n((function(r){return r+1}))}),[])}function s(r,e){var n=o();var t=m();var u=o(e);l((function(){n.current=u.current?u.current(r):r}),[r]);var a=c((function(r){var e=typeof r==="function"?r(n.current):r;n.current=e;t()}),[t]);return[n.current,a]}function p(r,e){var n=o(null);var t=o(r);i((function(){if(e!==null){r();return function(){if(n.current){clearTimeout(n.current);n.current=null}}}return;function r(){t.current();n.current=setTimeout(r,e||0)}}),[e])}export{f as useAsyncBase,m as useForceUpdate,s as useHalfControlState,p as useInterval};
